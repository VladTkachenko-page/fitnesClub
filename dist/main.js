(()=>{"use strict";(()=>{const e=document.querySelector(".head-main").querySelector(".clubs-list"),t=e.getElementsByTagName("ul");e.addEventListener("click",(()=>{"block"===t[0].style.display?t[0].style.display="none":t[0].style.display="block"})),window.addEventListener("scroll",(function(){pageYOffset>document.querySelector(".header-main").offsetHeight?document.getElementById("totop").style.display="block":document.getElementById("totop").style.display="none"}))})(),(()=>{document.addEventListener("click",(t=>{let n=t.target;if(n.hasAttribute("data-popup")){let t=n.getAttribute("data-popup");e(t)}}));const e=e=>{const n=document.querySelector(e);n.style.display="flex",t(n)},t=e=>{e.addEventListener("click",(t=>{let n=t.target;const l=e.querySelectorAll("input"),o=e.querySelectorAll(".validator-error"),c=e.querySelector(".validator-error2"),s=()=>{l.forEach((e=>{e.classList.remove("success"),e.classList.remove("error"),e.value="",e.checked=!1})),null!==o&&o.forEach((e=>{e.remove()})),null!==c&&c.remove()};n.classList.contains("close-form")||n.classList.contains("close-btn")?(e.style.display="none",s()):(n=n.closest(".form-content"),n||(e.style.display="none",s()))}))};(()=>{const e=document.querySelector(".fixed-gift"),n=document.getElementById("gift");e&&(e.addEventListener("click",(()=>{n.style.display="flex",e.style.display="none"})),t(n))})()})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t,n=0;const l=()=>{e[n].style.display="none",n++,n>=e.length&&(n=0),e[n].style.display="flex"};((e=3e3)=>{t=setInterval(l,e)})(3e3)})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=document.querySelector(".slider-dots");let l,o=0,c=document.querySelectorAll(".dot");const s=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)},a=()=>{c=document.querySelectorAll(".dot"),s(t,o,"slide-active"),s(c,o,"dot-active"),o++,o>=t.length&&(o=0),r(t,o,"slide-active"),r(c,o,"dot-active")},d=(e=3e3)=>{l=setInterval(a,e)};e.addEventListener("click",(e=>{e.preventDefault();const n=e.target;s(t,o,"slide-active"),s(c,o,"dot-active"),n.matches("#arrow-right")?o++:n.matches("#arrow-left")?o--:n.matches(".dot")&&c.forEach(((e,t)=>{e===n&&(o=t)})),o>=t.length&&(o=0),o<0&&(o=t.length-1),r(t,o,"slide-active"),r(c,o,"dot-active")})),e.addEventListener("mouseover",(e=>{(e.target.matches("span")||e.target.matches(".dot"))&&clearInterval(l)})),e.addEventListener("mouseout",(e=>{(e.target.matches("span")||e.target.matches(".dot"))&&d()})),(()=>{for(let e=0;e<t.length;e++){const e=document.createElement("li");e.className="dot",n.append(e)}c=document.querySelectorAll(".dot"),c[0].classList.add("dot-active")})(),d(3e3)})(),(()=>{const e=document.querySelector(".services-slider_wrap"),t=e.querySelector(".services-slider"),n=t.querySelectorAll(".slide"),l=e.querySelector(".prev"),o=e.querySelector(".next");let c=0,s=5,r=Math.floor(100/s);n.forEach((e=>{e.style.flex=`0 0 ${r-1}%`}));const a=()=>{r=Math.floor(100/s),n.forEach((e=>{e.style.flex=`0 0 ${r-1}%`}))},d=()=>{document.documentElement.clientWidth<1024&&document.documentElement.clientWidth>768?(s=3,a()):document.documentElement.clientWidth<768&&document.documentElement.clientWidth>576?(s=2,a()):document.documentElement.clientWidth<576?(s=1,a()):(s=5,a())};d(),l.addEventListener("click",(()=>{c>0&&(--c,t.style.transform=`translateX(-${c*r}%)`)})),o.addEventListener("click",(()=>{c<n.length-s&&(++c,t.style.transform=`translateX(-${c*r}%)`)})),window.addEventListener("resize",d)})(),(()=>{const e=document.querySelector(".popup-menu"),t=e.querySelectorAll("ul>li"),n=()=>{e.classList.toggle("popup-menu-active")};document.addEventListener("click",(t=>{let l=t.target;(l.closest(".close-menu-btn>img")||l.closest(".popup-menu>ul>li>a"))&&n(),l.closest(".menu-button>img")?n():l.closest(".popup-menu")||e.classList.remove("popup-menu-active")})),t.forEach((e=>{const t=e.querySelector("a");t.addEventListener("click",(e=>{e.preventDefault(),(e=>{let t=e.getAttribute("href").substring(1);t.includes("#")&&(t=e.getAttribute("href"),document.location.href=t);const n=document.getElementById(t).getBoundingClientRect().top;window.scrollBy({top:n,behavior:"smooth"})})(t)}))})),window.addEventListener("scroll",(function(){pageYOffset>240&&document.documentElement.clientWidth<768?document.querySelector(".top-menu").style.position="fixed":document.querySelector(".top-menu").style.position="static"})),window.addEventListener("resize",(function(){document.documentElement.clientWidth>767?document.querySelector(".top-menu").style.position="static":pageYOffset>240&&document.documentElement.clientWidth<768&&(document.querySelector(".top-menu").style.position="fixed")}))})(),(()=>{if(!document.querySelector("#mozaika")&&!document.querySelector("#schelkovo")){const e=document.querySelector(".time").querySelectorAll("input"),t=document.getElementById("card_leto_mozaika"),n=document.getElementById("card_leto_schelkovo"),l=document.getElementById("price-total"),o=document.querySelector(".price-message").querySelector("input");let c=0,s=l.textContent;const r=e=>{"1"===e.value?l.textContent=1999:"6"===e.value?l.textContent=9900:"9"===e.value?l.textContent=13900:"12"===e.value&&(l.textContent=19900),o.value="",c=0,s=l.textContent},a=e=>{"1"===e.value?l.textContent=2999:"6"===e.value?l.textContent=14990:"9"===e.value?l.textContent=21990:"12"===e.value&&(l.textContent=24990),o.value="",c=0,s=l.textContent};e.forEach((e=>{e.checked&&(t.addEventListener("click",(()=>r(e))),n.addEventListener("click",(()=>a(e)))),e.addEventListener("change",(()=>{e.checked&&t.checked&&r(e),e.checked&&n.checked&&a(e),t.addEventListener("click",(()=>r(e))),n.addEventListener("click",(()=>a(e)))}))})),o.addEventListener("input",(()=>{c<1&&"ТЕЛО2020"===o.value&&(c++,l.textContent=Math.floor(.7*parseFloat(l.textContent))),"ТЕЛО2020"!==o.value&&(l.textContent=s,c=0)}))}})(),(()=>{const e=document.querySelectorAll("input");for(let t=0;t<e.length;t++)"name"===e[t].name?e[t].addEventListener("input",(()=>{e[t].value=e[t].value.replace(/[^а-яА-ЯёЁ ]/,"")})):"phone"===e[t].name&&e[t].addEventListener("input",(()=>{e[t].value=e[t].value.replace(/[^0-9+]/,""),e[t].value.length>12&&(e[t].value=e[t].value.slice(0,12))}));const t=()=>{document.getElementById("thanks").getElementsByTagName("p")[0].textContent="Что-то пошло не так..."};document.addEventListener("submit",(e=>{let l=e.target;e.preventDefault(),(()=>{const e=document.getElementById("thanks"),t=document.getElementById("callback_form"),n=document.getElementById("free_visit_form");"flex"!==t.style.display&&"flex"!==n.style.display||(t.style.display="none",n.style.display="none"),e.style.display="flex",e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("close-form")||n.classList.contains("close-btn")?e.style.display="none":(n=n.closest(".form-content"),n||(e.style.display="none"))}))})(),document.getElementById("thanks").getElementsByTagName("p")[0].textContent="Идет отправка...";const o=new FormData(l),c={};o.forEach(((e,t)=>{c[e]=t})),n(c).then((e=>{if(200!==e.status)throw new Error("status network not 200");l.querySelectorAll("input").forEach((e=>{e.classList.remove("success"),"radio"!==e.getAttribute("type")?e.value="":"m1"===e.id||"t1"===e.id?e.checked=!0:"card_leto_mozaika"===e.id&&(e.checked=!0,document.getElementById("price-total").textContent=1999),"checkbox"===e.getAttribute("type")&&(e.checked=!1)})),(()=>{const e=document.getElementById("thanks");e.getElementsByTagName("p")[0].textContent="Спасибо! Мы скоро с вами свяжемся",setTimeout((()=>{e.style.display="none"}),5e3)})()})).catch(t)}));const n=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})()})();